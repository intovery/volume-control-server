<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³¼ë¥¨ ì»¨íŠ¸ë¡¤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        button {
            font-size: 18px;
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
        }
        input {
            font-size: 16px;
            padding: 5px;
            width: 80px;
        }
        #status {
            font-size: 18px;
            margin-top: 20px;
            display: block;
            color: blue;
        }
    </style>
</head>
<body>

    <h1>PC ë³¼ë¥¨ ì»¨íŠ¸ë¡¤</h1>

    <button onclick="sendRequest('/volume/up')">ğŸ”Š ë³¼ë¥¨ ì¦ê°€</button>
    <button onclick="sendRequest('/volume/down')">ğŸ”‰ ë³¼ë¥¨ ê°ì†Œ</button>
    <button onclick="setVolume()">ğŸš ë³¼ë¥¨ ì„¤ì •</button>
    <button id="muteButton" onclick="toggleMute()">ğŸ”‡ ìŒì†Œê±°</button>

    <br><br>
    <label for="volumeInput">ë³¼ë¥¨ ì„¤ì • (0~100): </label>
    <input type="number" id="volumeInput" min="0" max="100" value="50">

    <br><br>
    <label id="status">í˜„ì¬ ë³¼ë¥¨: ???</label>

    <script>
        let isMuted = false;

        function sendRequest(endpoint) {
            fetch(endpoint, { method: "POST" })
                .then(response => response.json())
                .then(data => updateStatus(data))
                .catch(error => updateStatus({ error: "ì—ëŸ¬ ë°œìƒ: " + error }));
        }

        function setVolume() {
            let volume = document.getElementById("volumeInput").value;
            fetch("/volume", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ volume: volume })
            })
            .then(response => response.json())
            .then(data => updateStatus(data))
            .catch(error => updateStatus({ error: "ì—ëŸ¬ ë°œìƒ: " + error }));
        }

        function toggleMute() {
            isMuted = !isMuted;
            fetch("/volume/mute", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ mute: isMuted })
            })
            .then(response => response.json())
            .then(data => {
                updateStatus(data);
                updateMuteButton();
            })
            .catch(error => updateStatus({ error: "ì—ëŸ¬ ë°œìƒ: " + error }));
        }

        function updateStatus(data) {
            let statusLabel = document.getElementById("status");
            if (data.volume !== undefined) {
                statusLabel.textContent = "í˜„ì¬ ë³¼ë¥¨: " + data.volume + "%";
                document.getElementById("volumeInput").value = data.volume;
            }
            if (data.mute !== undefined) {
                isMuted = data.mute;
                updateMuteButton();
            }
            if (data.error) {
                statusLabel.textContent = "ì˜¤ë¥˜: " + data.error;
                statusLabel.style.color = "red";
            }
        }

        function updateMuteButton() {
            let muteButton = document.getElementById("muteButton");
            muteButton.textContent = isMuted ? "ğŸ”Š ìŒì†Œê±° í•´ì œ" : "ğŸ”‡ ìŒì†Œê±°";
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
        window.onload = function() {
            fetch("/volume/status")
                .then(response => response.json())
                .then(data => updateStatus(data))
                .catch(error => updateStatus({ error: "ì´ˆê¸° ë¡œë“œ ì‹¤íŒ¨: " + error }));
        };
    </script>

</body>
</html>
